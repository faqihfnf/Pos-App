# Auth

- Buat grouping route untuk auth dengan membuat folder `src\app\(auth)`
- Folder yang dibuat dengan tanda kurung `()` seperti `(auth)` secara otomatis akan dianggap sebagai grouping route dan tidak akan dianggap sebagai routing oleh next js sehingga tidak akan muncul di url.
- Didalam folder `src\app\(auth)` baru bisa dibuat folder untuk route nya seperti `login`, `register`, `logout` dll

```
├─ src
│  └─ app
│     ├─ (auth)
│     │     ├─ login
│     │     │    ├─ _components
│     │     │    │    └─ login.tsx
│     │     │    └─ page.tsx
│     │     └─ layout.tsx
│     ├─ favicon.ico
│     ├─ global.css
│     ├─ page.tsx
│     └─ layout.tsx
└─ other folder
```

- Buat `layout.tsx` dalam folder `src\app\(auth)` untuk layout khusus halaman auth

### Login

- Buat file `page.tsx` pada folder `src\app\(auth)\login\page.tsx` untuk halaman login.
- Untuk membuat component yang khusus untuk halaman tertentu seperti login, bisa buat folder yang diawali dengan `_` seperti `_components`. Dan folder yang tidak ada file `page.tsx` didalamnya juga tidak akan dianggap sebagai routing oleh next js
- Untuk membuat komponen login, terlebih dahulu Install package

```bash
npx shadcn@latest add card form input label
```

- Ketika menginstall komponen `form` dari `shadcn` maka sudah otomatis terinstall package `react-hook-form` dan `zod`
- React Hook Form hanya bisa menerima input berupa string
- Buat folder terpisah untuk validasi form dan komponen-komponen lainnya di folder `src\validations`
- Buat file `auth-validation.ts` untuk validasi auth form
- Buat `loginSchema` untuk validasi login form. setelah itu buat type-nya. Dengan menggunakan `zod`, membuat type bisa menggunakan `z.infer` kemudian diikuti dengan `typeof` untuk mengambil type dari `zod`

```bash
export type LoginForm = z.infer<typeof loginSchema>;
```

- Buat folder `constants` untuk menyimpan konstanta-konstanta yang sering digunakan di seluruh project. Dan untuk login form, buat konstanta `INITIAL_LOGIN_FORM` untuk default value form login yang isinya adalah `email: "", password: ""`
- Setelah membuat validasi dan typenya, tinggal panggil dan gunakan di `login.tsx`

```tsx
const form = useForm<LoginForm>({
  resolver: zodResolver(loginSchema),
  defaultValues: INITIAL_LOGIN_FORM,
});
```

- `useForm` dari `react-hook-form` membutuhkan dua argumen didalamnya, resolver dan default values
- Untuk membuat resolver, gunakan `zodResolver` dari `zod` dengan `loginSchema` sebagai argumennya
- Sementara untuk default / initial value gunakan `INITIAL_LOGIN_FORM` yang sudah dibuat sebelumnya. Dan value ini akan manjadi value yang akan tampil di form ketika pertama kali di load.
